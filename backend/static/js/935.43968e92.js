"use strict";(self["webpackChunktonproject_frontend"]=self["webpackChunktonproject_frontend"]||[]).push([[935],{3:function(t,e,s){s.r(e),s.d(e,{default:function(){return x}});var i=s(3396);function n(t,e,s,n,r,a){const l=(0,i.up)("History");return(0,i.wg)(),(0,i.j4)(l)}var r=s(7139);const a={class:"only_mobile"},l={class:"container"},o={class:"d-flex justify-content-center"},d={class:"history_block"},c=(0,i._)("h1",null,"History",-1),u=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Payment ID"),(0,i._)("th",null,"Type"),(0,i._)("th",null,"Amount"),(0,i._)("th",null,"Symbol"),(0,i._)("th",null,"Date"),(0,i._)("th",null,"Status")])],-1),g=["src"],h=["src"],p=["src"],_=["src"],m=["src"],y=["src"];function w(t,e,s,n,w,k){return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",l,[(0,i._)("div",o,[(0,i._)("div",d,[c,(0,i._)("table",null,[u,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.history,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",null,(0,r.zw)(t.payment_id.slice(0,2)+"..."+t.payment_id.slice(-2)),1),(0,i._)("td",null,["deposit"===t.type?((0,i.wg)(),(0,i.iD)("img",{key:0,src:w.imgs.deposit,alt:"deposit"},null,8,g)):(0,i.kq)("",!0),"withdraw"===t.type?((0,i.wg)(),(0,i.iD)("img",{key:1,src:w.imgs.withdraw,alt:"withdraw"},null,8,h)):(0,i.kq)("",!0)]),(0,i._)("td",null,(0,r.zw)(t.amount.toFixed(2)),1),(0,i._)("td",null,["Ton"===t.symbol?((0,i.wg)(),(0,i.iD)("img",{key:0,src:w.imgs.ton,alt:"ton"},null,8,p)):(0,i.kq)("",!0)]),(0,i._)("td",null,(0,r.zw)(t.date),1),(0,i._)("td",null,[["finished"].includes(t.payment_status.toLowerCase())?((0,i.wg)(),(0,i.iD)("img",{key:0,src:w.imgs.done,alt:"done"},null,8,_)):(0,i.kq)("",!0),["waiting","confirming","confirmed","sending","partially_paid","created"].includes(t.payment_status.toLowerCase())?((0,i.wg)(),(0,i.iD)("img",{key:1,src:w.imgs.waiting,alt:"waiting"},null,8,m)):(0,i.kq)("",!0),["failed","refunded","expired","rejected"].includes(t.payment_status.toLowerCase())?((0,i.wg)(),(0,i.iD)("img",{key:2,src:w.imgs.canceled,alt:"canceled"},null,8,y)):(0,i.kq)("",!0)])])))),128))])]),this.history&&!this.is_end?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"button_load",onClick:e[0]||(e[0]=t=>k.get_history(this.page))}," load more ")):(0,i.kq)("",!0)])])])])}s(560);var k=s(1076),f=s(4239),b=s.p+"img/done.c3184766.svg",v=s.p+"img/canceled.8c56ce58.svg",D=s.p+"img/waiting.a051074f.svg",q=s.p+"img/deposit.cad05a25.svg",C=s.p+"img/withdraw.b39f16c9.svg",H=s(6731),T={name:"BalanceHistory",components:{},data(){return{imgs:{done:b,waiting:D,canceled:v,deposit:q,withdraw:C,ton:H},user:null,page:1,history:[],is_end:0}},methods:{getUserInfo(){this.user=(0,f.y)().getUser},async get_history(t){try{const e=await k.Z.get(`${(0,f.y)().getAPI}/app/get_history`,{headers:{"X-AUTH":this.user.token},params:{user_id:this.user.user_id,page:t,per_page:10}});this.history.push(...e.data.result),this.page=e.data.page,e.data.result&&0!==e.data.result.length||(this.is_end=!0)}catch(e){console.error("Ошибка при выполнении GET запроса:",e),this.$router.push("/error")}},open_dashboard(){this.$router.push("/")}},mounted(){window.Telegram.WebApp.BackButton.isVisible=!0,window.Telegram.WebApp.BackButton.onClick(this.open_dashboard.bind(this)),this.getUserInfo(),this.get_history(1)}},j=s(89);const A=(0,j.Z)(T,[["render",w]]);var B=A,I={name:"HistoryView",components:{History:B}};const U=(0,j.Z)(I,[["render",n]]);var x=U}}]);
//# sourceMappingURL=935.43968e92.js.map