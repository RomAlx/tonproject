"use strict";(self["webpackChunktonproject_frontend"]=self["webpackChunktonproject_frontend"]||[]).push([[772],{1604:function(e,s,t){t.r(s),t.d(s,{default:function(){return X}});var a=t(3396);function n(e,s,t,n,o,i){const r=(0,a.up)("Deposit");return(0,a.wg)(),(0,a.j4)(r)}var o=t(7139),i=t(9242),r=t.p+"img/dropdown_arrow.57a80737.svg";const l={class:"only_mobile"},_={class:"container"},c={class:"d-flex justify-content-center"},m={class:"deposit_block"},p=(0,a._)("h1",null," Choose asset to top up ",-1),y=["src"],u=(0,a._)("img",{class:"choose_arrow",src:r,alt:""},null,-1),d=["onClick"],h=["src"],g={key:0,class:"input_wrapper"},b=["placeholder"],f={key:0,class:"min_amount"},v={key:1,class:"min_amount"},w=(0,a._)("h1",null,"Top up",-1),k=[w],T={key:2,class:"pay_address"},D={key:0},q=(0,a._)("br",null,null,-1),x=["src"],C=["src"];function U(e,s,t,n,r,w){return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",_,[(0,a._)("div",c,[(0,a._)("div",m,[p,(0,a._)("div",{class:"deposit_block dropdown_select",onClick:s[0]||(s[0]=(...e)=>w.choose_asset&&w.choose_asset(...e))},[this.asset.symbol_img?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"symbol_img",src:this.asset.symbol_img,alt:""},null,8,y)):(0,a.kq)("",!0),(0,a._)("p",null,(0,o.zw)(this.asset.value),1),u]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.symbols,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"dropdown_elements",key:e},[this.is_choosing_asset?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"dropdown_element",onClick:s=>w.select_asset(e)},[(0,a._)("img",{class:"symbol_img",src:e.symbol_img,alt:""},null,8,h),(0,a._)("p",null,(0,o.zw)(e.value),1)],8,d)):(0,a.kq)("",!0)])))),128)),this.payment_info.is_relevant?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.wy)((0,a._)("input",{type:"number",class:"input_amount",placeholder:this.payment_info.min_amount.toFixed(2),"onUpdate:modelValue":s[1]||(s[1]=e=>r.payment_amount=e)},null,8,b),[[i.nr,r.payment_amount,void 0,{number:!0}]]),"btc"!=this.asset.symbol?((0,a.wg)(),(0,a.iD)("div",f,"Min: "+(0,o.zw)(this.payment_info.min_amount.toFixed(2))+" "+(0,o.zw)(this.asset.value),1)):((0,a.wg)(),(0,a.iD)("div",v,"Min: "+(0,o.zw)(this.payment_info.min_amount.toFixed(7))+" "+(0,o.zw)(this.asset.value),1))])):(0,a.kq)("",!0),this.payment_info.is_relevant&&!this.payment_info.pay_address?((0,a.wg)(),(0,a.iD)("div",{key:1,class:"pay_button",onClick:s[2]||(s[2]=(...e)=>w.create_pay_page&&w.create_pay_page(...e))},k)):(0,a.kq)("",!0),this.payment_info.pay_address?((0,a.wg)(),(0,a.iD)("div",T,[this.payment_info.amount_received?((0,a.wg)(),(0,a.iD)("p",D,[(0,a.Uk)(" Send "+(0,o.zw)(this.payment_amount)+" "+(0,o.zw)(this.asset.value)+" to this address",1),q,(0,a.Uk)(" You will receive "+(0,o.zw)(this.payment_info.amount_received.toFixed(2))+" Ton after transfer and exchange fees ",1)])):(0,a.kq)("",!0),(0,a._)("img",{class:"pay_address qr_code",src:this.payment_info.qr_code_url,alt:""},null,8,x),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.text_wrapper(this.payment_info.pay_address),(e=>((0,a.wg)(),(0,a.iD)("p",{key:e,onClick:s[3]||(s[3]=e=>w.copyTextToClipboard(this.payment_info.pay_address))},(0,o.zw)(e),1)))),128)),(0,a._)("img",{class:"copy_img",src:this.copy_img,alt:"",onClick:s[4]||(s[4]=e=>w.copyTextToClipboard(this.payment_info.pay_address))},null,8,C)])):(0,a.kq)("",!0)])])])])}t(560),t(8858),t(1318),t(3228);var z=t(6731),A=t.p+"img/usdt_symbol.c0f0b194.svg",$=t.p+"img/btc_symbol.f52bbd51.svg",B=t.p+"img/trx_symbol.88e0be54.svg";const j=[{symbol:"ton",symbol_img:z,value:"Ton"},{symbol:"usdttrc20",symbol_img:A,value:"USDT TRC-20"},{symbol:"btc",symbol_img:$,value:"BTC"},{symbol:"trx",symbol_img:B,value:"TRX"}];var F=j,I=t.p+"img/copy.7cfad2dd.svg",Z=t.p+"img/copy-success.6f136d16.svg",H=t(1076),R=t(4239),E={name:"BalanceDeposit",components:{},data(){return{user:null,is_choosing_asset:!1,asset:{symbol:null,symbol_img:null,value:"Select asset"},payment_info:{currency_from:null,currency_to:null,min_amount:null,usd_eqivalent:null,is_relevant:!1,amount_received:null,pay_address:null,qr_code_url:null},payment_amount:0,symbols:F,copy_img:I}},watch:{payment_amount(){this.payment_info.pay_address=null}},methods:{getUserInfo(){this.user=(0,R.y)().getUser},choose_asset(){this.is_choosing_asset=!this.is_choosing_asset,this.payment_info.is_relevant=!1,this.payment_info.pay_address=null},select_asset(e){this.asset.symbol=e.symbol,this.asset.symbol_img=e.symbol_img,this.asset.value=e.value,this.get_symbol_info(this.asset.symbol),this.choose_asset()},async get_symbol_info(e){try{const s=await H.Z.get(`${(0,R.y)().getAPI}/np/min_payment`,{headers:{"X-AUTH":this.user.token},params:{symbol:e}});void 0!==s.data.currency_from&&(this.payment_info.currency_from=s.data.currency_from,this.payment_info.currency_to=s.data.currency_to,this.payment_info.min_amount=s.data.min_amount,this.payment_info.usd_eqivalent=s.data.fiat_equivalent,this.payment_info.is_relevant=!0)}catch(s){console.error("Ошибка при выполнении GET запроса:",s),this.$router.push("/error")}},async create_pay_page(){try{const e=await H.Z.get(`${(0,R.y)().getAPI}/np/create_payment_page`,{headers:{"X-AUTH":this.user.token},params:{np_id:this.user.np_id,amount:this.payment_amount,currency_from:this.payment_info.currency_from,currency_to:this.payment_info.currency_to}});this.payment_info.pay_address=e.data.pay_address,this.payment_info.amount_received=e.data.amount_received,this.generate_qr(this.payment_info.pay_address)}catch(e){console.error("Ошибка при выполнении GET запроса:",e),this.$router.push("/error")}},async generate_qr(e){try{const s=await H.Z.get(`${(0,R.y)().getAPI}/app/generate_qr`,{params:{text:e},responseType:"blob"});this.payment_info.qr_code_url=URL.createObjectURL(s.data)}catch(s){console.error("Ошибка при выполнении GET запроса:",s),this.$router.push("/error")}},text_wrapper(e){let s=e.length,t=Math.floor(s/2),a=e.slice(0,t),n=e.slice(t);return[a,n]},async copyTextToClipboard(e){try{await navigator.clipboard.writeText(e),this.copy_img=Z}catch(s){console.error("Failed to copy: ",s)}},open_dashboard(){this.$router.push("/")}},mounted(){window.Telegram.WebApp.BackButton.isVisible=!0,window.Telegram.WebApp.BackButton.onClick(this.open_dashboard.bind(this)),this.getUserInfo()}},G=t(89);const M=(0,G.Z)(E,[["render",U]]);var P=M,S={name:"DepositView",components:{Deposit:P}};const V=(0,G.Z)(S,[["render",n]]);var X=V}}]);
//# sourceMappingURL=772.69419f16.js.map